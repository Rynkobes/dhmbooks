{"version":3,"file":"static/webpack/static/development/pages/index.js.b175dbe50bfb9bedec06.hot-update.js","sources":["webpack:///./src/components/DisplayStock.js"],"sourcesContent":["import React from 'react';\nimport { graphql } from 'react-apollo';\nimport Styledsection from './Styledsection';\nimport { TopSection, Wrapper, Table } from './viewStockComponents';\nimport { Select, Label } from './BookStyles';\nimport viewStock from './queries/viewStock';\n\nclass DisplayStock extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tinitialData: [],\n\t\t\tcountry: '---',\n\t\t\toption: ''\n\t\t\t// countryIndex: 0\n\t\t};\n\t\tthis.handlePick = this.handlePick.bind(this);\n\t}\n\n\tdisplayCountry = () => {\n\t\tconst data = this.props.data.Country;\n\t\tif (data === undefined) {\n\t\t\treturn (\n\t\t\t\t<TopSection>\n\t\t\t\t\t<Label right=\"-1.5cm\"> Select Country</Label>\n\t\t\t\t\t<Select>\n\t\t\t\t\t\t<option>loading...</option>\n\t\t\t\t\t</Select>\n\t\t\t\t</TopSection>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<TopSection>\n\t\t\t\t\t<Label right=\"-1.5cm\">Select Country</Label>\n\t\t\t\t\t<Select onChange={this.countryPick}>\n\t\t\t\t\t\t{data.map((country) => <option key={country.name}> {country.name} </option>)}\n\t\t\t\t\t</Select>\n\t\t\t\t</TopSection>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tcountryPick = (e) => {\n\t\tthis.setState({\n\t\t\tcountry: e.target.value,\n\t\t\toption: ''\n\t\t});\n\t};\n\n\tdisplayWarehouse(e) {\n\t\tlet pick = this.state.initialData;\n\t\tlet countryOption = this.state.country;\n\t\tlet countryIndex = pick.findIndex((countryName, index) => {\n\t\t\treturn countryOption === countryName.name;\n\t\t});\n\t\tif (\n\t\t\tcountryIndex === -1 ||\n\t\t\tpick[countryIndex].warehouse[0] === undefined ||\n\t\t\tpick[countryIndex].warehouse[0].books === undefined\n\t\t) {\n\t\t\treturn (\n\t\t\t\t<Wrapper>\n\t\t\t\t\t<Styledsection bgcolor=\"#4ea9ad\">\n\t\t\t\t\t\t<TopSection>{this.displayCountry()}</TopSection>\n\t\t\t\t\t</Styledsection>\n\t\t\t\t\t\n\t\t\t\t</Wrapper>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Wrapper>\n\t\t\t\t<Styledsection bgcolor=\"#4ea9ad\">\n\t\t\t\t\t<TopSection>\n\t\t\t\t\t\t{this.displayCountry()}\n\t\t\t\t\t\t<Label right=\"-0.7cm\">Select Warehouse</Label>\n\t\t\t\t\t\t<Select onChange={this.handlePick}>\n\t\t\t\t\t\t\t{pick[countryIndex].warehouse.map((warehousename) => {\n\t\t\t\t\t\t\t\treturn <option key={warehousename.warehouseID}>{warehousename.name}</option>;\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t</TopSection>\n\t\t\t\t</Styledsection>\n\t\t\t\t{this.displayBooks()}\n\t\t\t</Wrapper>\n\t\t);\n\t}\n\n\thandlePick(e) {\n\t\t// console.log(this.state.option);\n\t\tthis.setState({ option: e.target.value });\n\t}\n\n\tdisplayBooks() {\n\t\tconsole.log(this.state);\n\t\tlet pick = this.state.initialData;\n\t\tlet countryOption = this.state.country;\n\t\tlet Index = pick.findIndex((countryName) => {\n\t\t\treturn countryOption === countryName.name;\n\t\t});\n\t\tlet warehousePick = this.state.option;\n\t\tlet warehouseData = this.props.data.Country[Index];\n\t\tlet warehouseIndex = warehouseData.warehouse.findIndex((name, index) => {\n\t\t\treturn warehousePick === name.name;\n\t\t});\n\t\tif (warehouseIndex !== -1) {\n\t\t\treturn (\n\t\t\t\t<Table>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Title</th>\n\t\t\t\t\t\t\t<th>Stock</th>\n\t\t\t\t\t\t\t<th>Language</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t{warehouseData.warehouse[warehouseIndex].books.map((titles) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<tr key={titles.bookID}>\n\t\t\t\t\t\t\t\t\t<td>{titles.title}</td>\n\t\t\t\t\t\t\t\t\t<td>{titles.stock.balance}</td>\n\t\t\t\t\t\t\t\t\t<td>{titles.language.language}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tbody>\n\t\t\t\t</Table>\n\t\t\t);\n\t\t} else if (pick[Index].warehouse[0].books === undefined) {\n\t\t\treturn (\n\t\t\t\t<Table>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Title</th>\n\t\t\t\t\t\t\t<th>Stock</th>\n\t\t\t\t\t\t\t<th>Language</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</Table>\n\t\t\t);\n\t\t} else if (warehousePick === '') {\n\t\t\treturn (\n\t\t\t\t<Table>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Title</th>\n\t\t\t\t\t\t\t<th>Stock</th>\n\t\t\t\t\t\t\t<th>Language</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t{warehouseData.warehouse[0].books.map((titles) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<tr key={titles.bookID}>\n\t\t\t\t\t\t\t\t\t<td>{titles.title}</td>\n\t\t\t\t\t\t\t\t\t<td>{titles.stock.balance}</td>\n\t\t\t\t\t\t\t\t\t<td>{titles.language.language}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tbody>\n\t\t\t\t</Table>\n\t\t\t);\n\t\t\n\t\t}\n\t}\n\n\tcomponentDidUpdate() {\n\t\tlet fetchedData = this.props.data.Country;\n\t\tif (this.state.country === '---') {\n\t\t\tthis.setState({\n\t\t\t\tcountry: fetchedData[0].name,\n\t\t\t\tinitialData: this.props.data.Country\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn <Wrapper marginLeft=\"200px\">{this.displayWarehouse()}</Wrapper>;\n\t}\n}\n\nexport default graphql(viewStock)(DisplayStock);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAYA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAlCA;AAoCA;AACA;AACA;AAFA;AAIA;AACA;AAvCA;AACA;AACA;AACA;AACA;AAJA;AAMA;AARA;AASA;AACA;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAKA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAOA;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAKA;AACA;;;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;AAxKA;AACA;AA0KA;;;;A","sourceRoot":""}